# HarmonyOS æ‰¹é‡ä»£ç æ£€è§†å·¥å…· - ä½¿ç”¨æŒ‡å—

## åŠŸèƒ½æ¦‚è¿°

æœ¬å·¥å…·æä¾›äº†æ‰¹é‡æ£€è§† HarmonyOS ä»£ç æäº¤çš„åŠŸèƒ½ï¼Œæ”¯æŒï¼š

1. **æ”¶é›† Commits** - ä» Git ä»“åº“æ”¶é›†æäº¤è®°å½•å¹¶å¯¼å‡ºåˆ° CSV æ–‡ä»¶
2. **æ‰¹é‡æ£€è§†** - ä» CSV è¯»å– commit-id åˆ—è¡¨ï¼Œé€ä¸ªæ£€è§†å¹¶ç”ŸæˆæŠ¥å‘Š
3. **æ ‡å‡†åŒ–æŠ¥å‘Š** - æ¯æ£€è§†å®Œ 1 ä¸ª commit-id ç«‹å³è¾“å‡ºä¸€ä»½æ£€è§†æŠ¥å‘Š

## æ£€è§†æŠ¥å‘Šæ ¼å¼

æŠ¥å‘Šä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| **commit-id** | string | å®Œæ•´çš„ 40 å­—ç¬¦ commit å“ˆå¸Œå€¼ |
| **æ–‡ä»¶è·¯å¾„** | string | ç›¸å¯¹äºä»“åº“æ ¹ç›®å½•çš„æ–‡ä»¶è·¯å¾„ |
| **è¡Œå·** | number | é—®é¢˜ä»£ç çš„èµ·å§‹è¡Œå· |
| **é—®é¢˜æè¿°** | string | æ¸…æ™°çš„é—®é¢˜æè¿° |
| **é—®é¢˜çº§åˆ«** | enum | ğŸ”´ ä¸¥é‡ / ğŸŸ  é«˜ / ğŸŸ¡ ä¸­ç­‰ / ğŸŸ¢ è½»å¾® / ğŸ”µ æç¤º |

## ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ 1: åˆ†æ­¥æ‰§è¡Œ

#### æ­¥éª¤ 1: æ”¶é›† Commits

```bash
# æ”¶é›†æœ€è¿‘ä¸€å‘¨çš„ commits
npm run collect -- --repo <ä»“åº“è·¯å¾„> --output commits.csv --since "1 week ago"

# æ”¶é›†æœ€è¿‘ 50 ä¸ª commits
npm run collect -- --repo <ä»“åº“è·¯å¾„> --output commits.csv --max 50

# ä»ç‰¹å®šåˆ†æ”¯æ”¶é›†
npm run collect -- --repo <ä»“åº“è·¯å¾„> --output commits.csv --branch develop --since "2024-01-01"
```

#### æ­¥éª¤ 2: æ‰¹é‡æ£€è§†

```bash
# æ£€è§† CSV ä¸­çš„æ‰€æœ‰ commits
npm run review -- --repo <ä»“åº“è·¯å¾„> --csv commits.csv --output reports/

# æ£€è§†å‰ 10 ä¸ª commits
npm run review -- --repo <ä»“åº“è·¯å¾„> --csv commits.csv --output reports/ --max 10

# ä»ç¬¬ 20 ä¸ªå¼€å§‹æ£€è§†ï¼ˆç”¨äºæ–­ç‚¹ç»­æ£€ï¼‰
npm run review -- --repo <ä»“åº“è·¯å¾„> --csv commits.csv --output reports/ --from 20
```

### æ–¹å¼ 2: ä¸€é”®æ‰§è¡Œ

```bash
# è‡ªåŠ¨æ”¶é›† + æ£€è§†
npm run run -- --repo <ä»“åº“è·¯å¾„> --output review-output --since "1 week ago" --max-collect 100 --max-review 50
```

## CLI å‚æ•°è¯´æ˜

### collect å‘½ä»¤

| å‚æ•° | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--repo` | âœ… | - | Git ä»“åº“è·¯å¾„ |
| `--output` | âœ… | - | è¾“å‡º CSV æ–‡ä»¶è·¯å¾„ |
| `--branch` | âŒ | `HEAD` | åˆ†æ”¯åç§° |
| `--since` | âŒ | - | èµ·å§‹æ—¥æœŸï¼ˆå¦‚ "2024-01-01" æˆ– "1 week ago"ï¼‰|
| `--until` | âŒ | - | ç»“æŸæ—¥æœŸ |
| `--max` | âŒ | `100` | æœ€å¤§æ”¶é›†æ•°é‡ |

### review å‘½ä»¤

| å‚æ•° | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--repo` | âœ… | - | Git ä»“åº“è·¯å¾„ |
| `--csv` | âœ… | - | CSV æ–‡ä»¶è·¯å¾„ |
| `--output` | âœ… | - | æŠ¥å‘Šè¾“å‡ºç›®å½• |
| `--exts` | âŒ | `.ets,.ts` | æ–‡ä»¶æ‰©å±•åï¼ˆé€—å·åˆ†éš”ï¼‰|
| `--max` | âŒ | `50` | æœ€å¤§æ£€è§†æ•°é‡ |
| `--from` | âŒ | `0` | ä»ç¬¬å‡ ä¸ªå¼€å§‹ï¼ˆç”¨äºæ–­ç‚¹ç»­æ£€ï¼‰|

### run å‘½ä»¤

| å‚æ•° | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--repo` | âœ… | - | Git ä»“åº“è·¯å¾„ |
| `--output` | âŒ | `./review-output` | è¾“å‡ºç›®å½• |
| `--since` | âŒ | `1 week ago` | èµ·å§‹æ—¥æœŸ |
| `--max-collect` | âŒ | `100` | æœ€å¤§æ”¶é›†æ•°é‡ |
| `--max-review` | âŒ | `50` | æœ€å¤§æ£€è§†æ•°é‡ |

## è¾“å‡ºæ–‡ä»¶ç»“æ„

```
review-output/
â”œâ”€â”€ commits.csv                                    # æ”¶é›†çš„ commits
â””â”€â”€ reports/
    â”œâ”€â”€ commit-a1b2c3d-1705300000000.md           # å•ä¸ª commit æ£€è§†æŠ¥å‘Š
    â”œâ”€â”€ commit-d4e5f6g-1705300100000.md
    â””â”€â”€ summary-1705300200000.md                   # æ±‡æ€»æŠ¥å‘Š
```

## æŠ¥å‘Šç¤ºä¾‹

### å•ä¸ª Commit æŠ¥å‘Š

```markdown
# Commit æ£€è§†æŠ¥å‘Š

## Commit ä¿¡æ¯

| å­—æ®µ | å€¼ |
|------|-----|
| **Commit ID** | `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u0v1w2x3` |
| **çŸ­ ID** | `a1b2c3d` |
| **æäº¤æ¶ˆæ¯** | Add login feature |
| **æäº¤ä½œè€…** | John Doe |
| **æäº¤æ—¥æœŸ** | 2024-01-15 |
| **æ£€è§†æ—¶é—´** | 2024-01-15T10:30:00Z |

## æ£€è§†ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| **æ£€è§†æ–‡ä»¶æ•°** | 3 |
| **é—®é¢˜æ€»æ•°** | 5 |
| **ğŸ”´ ä¸¥é‡** | 1 |
| **ğŸŸ  é«˜** | 2 |
| **ğŸŸ¡ ä¸­ç­‰** | 1 |
| **ğŸŸ¢ è½»å¾®** | 1 |
| **ğŸ”µ æç¤º** | 0 |

## é—®é¢˜æ¸…å•

| Commit ID | æ–‡ä»¶è·¯å¾„ | è¡Œå· | é—®é¢˜æè¿° | é—®é¢˜çº§åˆ« |
|-----------|----------|------|----------|----------|
| a1b2c3d | `entry/src/main/ets/Login.ets` | 15 | async å‡½æ•°ç¼ºå°‘é”™è¯¯å¤„ç† | ğŸ”´ ä¸¥é‡ |
| a1b2c3d | `entry/src/main/ets/Login.ets` | 32 | ForEach ç¼ºå°‘ key ç”Ÿæˆå™¨ | ğŸŸ¡ ä¸­ç­‰ |
```

### æ±‡æ€»æŠ¥å‘Š

```markdown
# æ‰¹é‡æ£€è§†æ±‡æ€»æŠ¥å‘Š

## æ¦‚è§ˆ

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| **æ£€è§† Commit æ•°** | 10 |
| **æ€»æ–‡ä»¶æ•°** | 45 |
| **æ€»é—®é¢˜æ•°** | 23 |

### é—®é¢˜çº§åˆ«åˆ†å¸ƒ

| çº§åˆ« | æ•°é‡ |
|------|------|
| ğŸ”´ ä¸¥é‡ | 3 |
| ğŸŸ  é«˜ | 7 |
| ğŸŸ¡ ä¸­ç­‰ | 8 |
| ğŸŸ¢ è½»å¾® | 5 |
```

## ç¼–ç¨‹æ–¹å¼ä½¿ç”¨

```typescript
import { collectCommitsToCSV, CollectOptions } from './src/utils/commit-collector';
import { batchReviewCommits, BatchReviewOptions } from './src/utils/batch-reviewer';

// æ­¥éª¤ 1: æ”¶é›† commits
const collectOptions: CollectOptions = {
  repoPath: '/path/to/repo',
  outputPath: './commits.csv',
  since: '1 week ago',
  maxCount: 100
};
const commits = collectCommitsToCSV(collectOptions);

// æ­¥éª¤ 2: æ‰¹é‡æ£€è§†
const reviewOptions: BatchReviewOptions = {
  repoPath: '/path/to/repo',
  csvPath: './commits.csv',
  outputDir: './reports',
  maxCommits: 50
};
const reports = await batchReviewCommits(reviewOptions);

// å¤„ç†ç»“æœ
console.log(`æ£€è§†äº† ${reports.length} ä¸ª commits`);
console.log(`æ€»é—®é¢˜æ•°: ${reports.reduce((sum, r) => sum + r.totalIssues, 0)}`);
```

## æœ€ä½³å®è·µ

1. **ä»å°å¼€å§‹** - å…ˆç”¨ `--max-review 5` æµ‹è¯•ï¼Œç¡®è®¤æ— è¯¯åå†å¤„ç†å¤§é‡æ•°æ®
2. **ä½¿ç”¨è¿‡æ»¤** - åº”ç”¨ `--since` å’Œ `--max-collect` é™åˆ¶èŒƒå›´
3. **æ–­ç‚¹ç»­æ£€** - ä½¿ç”¨ `--from` å‚æ•°ç»§ç»­æœªå®Œæˆçš„æ£€è§†
4. **æŸ¥çœ‹æ±‡æ€»** - å§‹ç»ˆå…ˆæŸ¥çœ‹ `summary-*.md` æ±‡æ€»æŠ¥å‘Š
5. **å½’æ¡£æŠ¥å‘Š** - ä¿å­˜å†å²æŠ¥å‘Šç”¨äºè¶‹åŠ¿åˆ†æ

## æ£€è§†è§„åˆ™

æœ¬å·¥å…·æ‰§è¡Œä»¥ä¸‹ HarmonyOS ä»£ç è§„èŒƒæ£€æŸ¥ï¼š

1. **ç¼–è¯‘ä¸ç±»å‹** - ç±»å‹/æ¥å£å®šä¹‰æ£€æŸ¥
2. **é”™è¯¯å¤„ç†** - async å‡½æ•°çš„ try-catch-finally æ£€æŸ¥
3. **æ€§èƒ½** - ForEach key ç”Ÿæˆå™¨ã€å¤§æ•°æ®é›†åˆ†é¡µæ£€æŸ¥
4. **å®‰å…¨** - API å“åº”éªŒè¯ã€æƒé™æ£€æŸ¥
5. **æ¶æ„** - å•ä¸€èŒè´£åŸåˆ™ã€ä¸šåŠ¡é€»è¾‘åˆ†ç¦»æ£€æŸ¥

è¯¦ç»†è§„åˆ™è¯·å‚é˜… `SKILL.md` æ–‡ä»¶ã€‚
